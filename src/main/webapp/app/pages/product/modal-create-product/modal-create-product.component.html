<div class="modal-header">
  <h3 class="modal-title text-bold" id="exampleModalPopoversLabel">{{ selectedProduct.id ? 'Chi tiết sản phẩm' : 'Thêm mới sản phẩm' }}</h3>
  <button type="button" class="btn-close" aria-label="Close" (click)="dismiss($event)"></button>
</div>
<div class="modal-body row">
  <div class="col-md-6">
    <div class="pos-group-info">
      <div class="col-md-12 row m-0">
        <div class="col-md-6 ps-0">
          <div class="pos-input-img pos-infor m-0" (click)="onInputFile()">
            <div class="image" *ngIf="!selectedProduct.imageUrl">
              <img src="/content/icon/san-pham/products.svg" />
            </div>
            <div class="" *ngIf="selectedProduct.imageUrl">
              <div class="image opacity-100">
                <!--                [style.background-image]="'url(' + (selectedProduct.imageUrl) +')'"-->
                <img [src]="selectedProduct.imageUrl" />
                <button class="button-delete-img" (click)="onDismisImage($event)" tabindex="0">
                  <i class="fa-solid fa-xmark"></i>
                </button>
              </div>
            </div>
            <input type="file" accept="image/*" #imageInput style="display: none" (change)="onImageSelected($event)" />
          </div>
        </div>
        <div class="col-md-6 pe-0">
          <div class="col-md-12 pos-infor">
            <label class="title-info">Tên sản phẩm <span style="color: red; margin: 0px">*</span></label>
            <input class="input-value form-control" [(ngModel)]="selectedProduct.name" placeholder="Ví dụ: Thịt lợn" />
          </div>
          <div class="col-md-12 margin-top-24">
            <label class="title-info">Nhóm sản phẩm </label>
            <div class="custom-select-wrapper">
              <ng-select
                [items]="categories"
                class="select-value"
                bindLabel="name"
                bindValue="id"
                [multiple]="true"
                [selectableGroup]="true"
                placeholder="Chọn nhóm sản phẩm"
                [(ngModel)]="selectedProduct.groups"
                (change)="onCategorySelected($event)"
              >
              </ng-select>
              <div class="icon-right">
                <i class="icon-add fa-sharp fa-solid fa-plus"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pos-infor col-md-12 row">
        <div class="col-md-12 ps-0 d-flex">
          <label class="title-info">Theo dõi hàng tồn kho</label>
          <div class="form-check form-switch">
            <input
              class="form-check-input"
              type="checkbox"
              name=""
              id="inventoryTracking"
              style="margin: 0px"
              [checked]="selectedProduct.inventoryTracking == true"
              [(ngModel)]="selectedProduct.inventoryTracking"
              (click)="onCheckboxChange()"
            />
            <label class="form-check-label" for="inventoryTracking"></label>
          </div>
        </div>
      </div>
      <div class="pos-infor col-md-12 row" *ngIf="selectedProduct.inventoryTracking">
        <div class="col-md-12 ps-0 d-flex align-items-center">
          <label class="title-info">Kho </label>
          <div class="input-group" style="padding-left: 1.5rem">
            <a class="btn btn-default" (click)="minus()"><i class="fa fa-minus"></i></a>
            <input
              type="text"
              class="form-control border-0 text-center"
              name=""
              placeholder="0"
              [(ngModel)]="selectedProduct.inventoryCount"
            />
            <a class="btn btn-default" (click)="plus()"><i class="fa fa-plus"></i></a>
          </div>
        </div>
      </div>

      <div class="col-md-12 pos-infor">
        <label class="title-info">Mô tả</label>
        <textarea
          class="form-control"
          id="desciption"
          rows="9"
          style="max-height: 215px"
          placeholder="Nhập mô tả"
          [(ngModel)]="selectedProduct.description"
        >
        </textarea>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="pos-group-info margin-top-0">
      <div class="pos-infor col-md-12 row">
        <div class="col-md-6 pe-0 margin-top-24">
          <label class="title-info">Mã sản phẩm </label>
          <input class="input-value form-control" placeholder="Mã sản phẩm" disabled="true" [(ngModel)]="selectedProduct.code" />
        </div>
      </div>

      <div class="pos-infor col-md-12 row">
        <div class="col-md-6 ps-0">
          <label class="title-info">Giá bán <span style="color: red; margin: 0px">*</span></label>
          <input
            class="input-value form-control"
            placeholder="Nhập giá bán"
            type="number"
            [(ngModel)]="selectedProduct.salePrice"
            jhiNumberOnly
            (click)="selectedProduct.salePrice < 0 ? (selectedProduct.salePrice = 0) : selectedProduct.salePrice"
          />
        </div>
        <div class="col-md-6 pe-0 margin-top-24">
          <label class="title-info">Giá nhập <span style="color: red; margin: 0px">*</span> </label>
          <input
            class="input-value form-control"
            placeholder="Nhập giá nhập"
            type="number"
            [(ngModel)]="selectedProduct.purchasePrice"
            jhiNumberOnly
            (click)="selectedProduct.purchasePrice < 0 ? (selectedProduct.purchasePrice = 0) : selectedProduct.purchasePrice"
          />
        </div>
      </div>
      <div class="pos-infor mb-0 col-md-12 row">
        <div class="col-md-12 ps-0 pe-0">
          <label class="title-info">Đơn vị tính </label>
          <div class="custom-select-wrapper">
            <input class="input-value form-control" [(ngModel)]="selectedProduct.unit" />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal-footer">
  <div class="btn-row col-md-12" style="margin: 0; justify-content: end; display: flex">
    <button type="button" class="btn btn-default me-2 mb-1" (click)="dismiss($event)">
      <fa-icon icon="cancel"></fa-icon>
      <span class="ms-2" jhiTranslate="global.button.cancel"></span>
    </button>
    <button type="button" class="btn btn-success me-1 mb-1" (click)="onSaveProduct()">
      <i class="fas fa-square-check"></i>
      <span class="ms-2" jhiTranslate="global.button.save"></span>
    </button>
  </div>
</div>
